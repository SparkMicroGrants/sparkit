<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>

		<!-- Community Projects - Base-->
  		<record model="ir.ui.view" id="spark_project_form_view">
  			<field name="name">sparkproject.form</field>
  			<field name="model">sparkit.sparkproject</field>
  			<field name="arch" type="xml">
  				<form string="Spark Community Project" create="false">
  					<sheet>
  						<group colspan="4" col="4" string="Project Information" class="no_style">
  							<group colspan="2">
  								<field name="community_id"
  									options="{'no_create': True}"/>
									<field name="facilitator_id"/>
  								<field name="grant_agreement_date"/>
  								<field name="category_id"
  									options="{'no_create': True, 'no_open': True}"/>
  								<field name="subcategory_id"
  									options="{'no_create': True, 'no_open': True}"
  									domain="[('category_id', '=', category_id)]"/>
  							</group>
  							<group colspan="2">
								<field name="grant_amount" />
   								<field name="currency_id"/>
  								<field name="exchange_rate" />
  								<field name="grant_amount_local"/>
  							</group>
  						</group>
  						<notebook>
  							<page string="Summary">
  								<group colspan="4" col="4" string="Disbursal Summary" class="no_style">
  									<group colspan="2">
  										<field name="number_requests"/>
  										<field name="number_disbursals"/>
  										<field name="total_disbursed"/>
  										<field name="left_to_disburse"/>
  									</group>
  									<group colspan="2">
  										<field name="total_expenditure"/>
  										<field name="outstanding_receipts"/>
  									</group>
  								</group>
  								<group colspan="6" col="6" string="Budgeted Contribution Summary" class="no_style">
  									<group colspan="2">
  										<field name="spark_contribution" />
  										<field name="community_contribution" />
  										<field name="other_contribution" />
  									</group>
  									<group colspan="2">
  										<field name="spark_contribution_percent" />
  										<field name="community_contribution_percent" />
  										<field name="other_contribution_percent" />
  									</group>
  									<group colspan="2">
  										<field name="total"/>
  										<field name="grant_surplus"/>
  									</group>
  								</group>
  							</page>
  							<page string="Budget">
  								<group>
  									<field name="budget_line_item_ids" nolabel="1"/>
  								</group>
  							</page>
  							<page string="Transactions">
  								<field name="transaction_ids" nolabel="1"
  									context="{'default_project_id': active_id}"/>
  							</page>
  							<page string="Disbursals">
  								<field name="disbursal_ids" nolabel="1"
  									context="{'default_project_id': active_id}"/>
  							</page>
  							<page string="Disbursal Requests">
  								<field name="disbursal_request_ids" nolabel="1"
  									context="{'default_project_id': active_id}"/>
  							</page>
								<page string="Project Support Initiatives">
									<field name="project_support_initiative_ids" nolabel="1"
										context="{'default_project_id': active_id, 'default_community_id': community_id}"/>
								</page>
  						</notebook>
  					</sheet>
  				</form>
  			</field>
  		</record>

  		<!--Community Projects - View -->
  		<record model="ir.ui.view" id="spark_project_tree">
  			<field name="name">sparkproject.tree</field>
  			<field name="model">sparkit.sparkproject</field>
  			<field name="arch" type="xml">
  				<tree string="Spark Community Projects">
  					<field name="grant_agreement_date"/>
  					<field name="community_id"/>
  					<field name="category_id"/>
  					<field name="grant_amount"/>
  				</tree>
  			</field>
  		</record>

			<record model="ir.ui.view" id="spark_project_default_search">
				<field name="name">sparkproject.search</field>
				<field name="model">sparkit.sparkproject</field>
				<field name="arch" type="xml">
					<search string="Grant Project(s)">
						<field name="community_name"/>
						<field name="community_number"/>
						<field name="facilitator_id"/>
						<field name="category_id"/>
						<group expand="0" string="Group By">
							<filter name="by_community" string="Community" context="{'group_by': 'community_id'}" help="Community"/>
							<filter name="by_facilitator" string="Facilitator" context="{'group_by':'facilitator_id'}" help="Facilitator"/>
							<filter name="by_project" string="Project Category" context="{'group_by':'category_id'}" help="Project Category"/>
						</group>
					</search>
				</field>
			</record>


  		<!--Community Projects Actions-->
  		<record model="ir.actions.act_window" id="spark_project_list_action">
  			<field name="name">Spark Projects</field>
  			<field name="res_model">sparkit.sparkproject</field>
  			<field name="view_type">form</field>
  			<field name="view_mode">tree,form</field>
  			<field name="help" type="html">
  				<p class="oe_view_nocontent_create">
  				Create the first Community Project!</p>
  			</field>
  		</record>


  		<!--Budget Items Form-->
  		<record model="ir.ui.view" id="budget_items_view">
  			<field name="name">budgetitems.form</field>
  			<field name="model">sparkit.budgetitems</field>
  			<field name="arch" type="xml">
  				<form string="Project Budget Items">
  					<sheet>
  						<group>
  							<field name="name"/>
  							<field name="unit"/>
  						</group>
  					</sheet>
  				</form>
  			</field>
  		</record>

  		<!--Budget Items List View-->
  		<record model="ir.ui.view" id="budget_items_tree">
  			<field name="name">budgetitems.tree</field>
  			<field name="model">sparkit.budgetitems</field>
  			<field name="arch" type="xml">
  				<tree string="Budget Items" editable="bottom">
  					<field name="name"/>
  					<field name="unit"/>
  				</tree>
  			</field>
  		</record>

  		<!--Budget Items Form Actions-->
  		<record model="ir.actions.act_window" id="budget_items_list_action">
  			<field name="name">Budget Items</field>
  			<field name="res_model">sparkit.budgetitems</field>
  			<field name="view_type">form</field>
  			<field name="view_mode">tree,form</field>
  			<field name="help" type="html">
  				<p class="oe_view_nocontent_create">Create the first Budget Item!</p>
  			</field>
  		</record>

  		<!--Unique Budget Items List View-->
  		<record model="ir.ui.view" id="unique_budget_items_tree">
  			<field name="name">uniquebudgetitems.tree</field>
  			<field name="model">sparkit.projectbudgetitem</field>
  			<field name="arch" type="xml">
  				<tree string="Community Budget Items" editable="bottom">
  					<field name="budget_item_id" options="{'no_create': True}"/>
  					<field name="community_id" invisible="1"/>
  					<field name="unit"/>
  					<field name="unit_cost"/>
  					<field name="number_of_units"/>
  					<field name="source"/>
  					<field name="budgeted"/>
  					<field name="actual"/>
  					<field name="difference"/>
  					<field name="budget_phase"/>
  				</tree>
  			</field>
  		</record>

  		<!--Unique Budget Items Form Actions-->
  		<record model="ir.actions.act_window" id="unique_budget_items_list_action">
  			<field name="name">Community Budget</field>
  			<field name="res_model">sparkit.projectbudgetitem</field>
  			<field name="view_type">tree</field>
  			<field name="view_mode">tree</field>
  			<field name="help" type="html">
  				<p class="oe_view_nocontent_create">Create the first Budget Item!</p>
  			</field>
  		</record>

  		<!--Transactions List View-->
  		<record model="ir.ui.view" id="transactions_tree">
  			<field name="name">transactions.tree</field>
  			<field name="model">sparkit.transaction</field>
  			<field name="arch" type="xml">
  				<tree string="Transactions" editable="bottom">
  				  	<field name="project_id" invisible="1"/>
  					<field name="date"/>
  					<field name="budget_item_id" options="{'no_create': True}"
  						domain="[('project_id', '=', project_id)]"/>
  					<field name="amount"/>
  					<field name="receipt"/>
  					<field name="receipt_number"/>
  					<field name="notes" style="width:40%%"/>
  				</tree>
  			</field>
  		</record>

  		<!--Transaction Form Actions-->
  		<record model="ir.actions.act_window" id="transactions_list_action">
  			<field name="name">Transactions</field>
  			<field name="res_model">sparkit.transaction</field>
  			<field name="view_type">tree</field>
  			<field name="view_mode">tree</field>
  			<field name="help" type="html">
  				<p class="oe_view_nocontent_create">Create the first Transaction!</p>
  			</field>
  		</record>

  		<!--Disbursal Requests List View-->
  		<record model="ir.ui.view" id="disbursal_requests_tree">
  			<field name="name">disbursalrequests.tree</field>
  			<field name="model">sparkit.disbursalrequest</field>
  			<field name="arch" type="xml">
  				<tree string="Disbursal Requests" editable="bottom">
  					<field name="disbursal_request_number"/>
  					<field name="date"/>
  					<field name="amount"/>
  					<field name="amount_approved"/>
  					<field name="disbursed_to_date"/>
  					<field name="balance"/>
  				</tree>
  			</field>
  		</record>

  		<!--Disbursal Requests Form Actions-->
  		<record model="ir.actions.act_window" id="disbursalrequests_list_action">
  			<field name="name">Disbursal Requests</field>
  			<field name="res_model">sparkit.disbursalrequest</field>
  			<field name="view_type">tree</field>
  			<field name="view_mode">tree</field>
  			<field name="help" type="html">
  				<p class="oe_view_nocontent_create">Create the first Disbursal Request!</p>
  			</field>
  		</record>


  		<!--Disbursals List View-->
  		<record model="ir.ui.view" id="disbursals_tree">
  			<field name="name">disbursals.tree</field>
  			<field name="model">sparkit.disbursal</field>
  			<field name="arch" type="xml">
  				<tree string="Disbursals" editable="bottom">
  					<field name="project_id" invisible="1"/>
  					<field name="request_number_id" options="{'no_create': True}"
  						domain="[('project_id', '=', project_id)]"/>
  					<field name="date"/>
  					<field name="amount"/>
  					<field name="note"/>
  					<field name="given_to_community_by_id" options="{'no_create': True}"/>
  					<field name="cash_given_by_id" options="{'no_create': True}"/>
  				</tree>
  			</field>
  		</record>

  		<!--Disbursal Form Actions-->
  		<record model="ir.actions.act_window" id="disbursals_list_action">
  			<field name="name">Disbursals</field>
  			<field name="res_model">sparkit.disbursal</field>
  			<field name="view_type">tree</field>
  			<field name="view_mode">tree</field>
  			<field name="help" type="html">
  				<p class="oe_view_nocontent_create">Create the first Transaction!</p>
  			</field>
  		</record>

			<!--Project Support Initiatives List View-->
  		<record model="ir.ui.view" id="project_support_initiatives_tree">
  			<field name="name">projectsupportinitiatives.tree</field>
  			<field name="model">sparkit.projectsupportinitiative</field>
  			<field name="arch" type="xml">
  				<tree string="Project Support Initatives" editable="bottom">
						<field name="community_id" invisible="1"
  						options="{'no_create': True}"/>
  					<field name="project_id" options="{'no_create': True}"
							 required="1"
  						 domain="[('community_id', '=', community_id)]"/>
  					<field name="date"/>
  					<field name="description"/>
  				</tree>
  			</field>
  		</record>

  		<!--Project Support Initiatives Form Actions-->
  		<record model="ir.actions.act_window" id="project_support_initiatives_list_action">
  			<field name="name">Project Suport Initiatives</field>
  			<field name="res_model">sparkit.projectsupportinitiative</field>
  			<field name="view_type">tree</field>
  			<field name="view_mode">tree</field>
  			<field name="help" type="html">
  				<p class="oe_view_nocontent_create">Create the first Disbursal Request!</p>
  			</field>
  		</record>



    </data>
</openerp>
